<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>FishEye</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/7.0.0/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/7.0.0/firebase-database.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

    <link rel="stylesheet" type="text/css"  href="estilo.css" />

     <!-- Bootstrap --> 
     <link href="css/bootstrap.min.css" rel="stylesheet"> 
     



  </head>
  <body>  
      <nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: rgb(177, 235, 217);">
        <a class="navbar-brand"> FISHEYE </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-item nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
          </div>
        </div>
      </nav>

      <nav class="navbar navbar-default">
        <div class="table-responsive-md">
          <table class="table" style="border: 2px;">
            <!-- Em linhas -->
            <tr class="table-success" style="background-color: #e3f2fd;">
              <th scope="col" style="color: #008080">
                  <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color: #008080;">
                          ID:
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown" style="background-color: #e3f2fd;">
                          <a id = "id1" class="dropdown-item" href="#" style="color: #008080;">01</a>
                          <div class="dropdown-divider"></div>
                          <a type="button" class="dropdown-item " id="butao02" data-nome = "02" style="color: #008080;"> 02 </a>
                            <script type="text/javascript">
	                           function exibirMensagem(){
                                var data = document.getElementById("navbarDropdown");
                                data.innerHTML = (" ID: 02");
                              }
                              var btn = document.getElementById("butao02");
                              btn.addEventListener("click", exibirMensagem);

                            </script>
                          <div class="dropdown-divider"></div>
                          <a class="dropdown-item" href="#" style="color: #008080;">03</a>
                        </div>
                  </li>
              
              </th>
              <th scope="col" style="color: #008080">Sensores</th>
              <th scope="col" id = coluna style="color: #008080;">Valores</th>
            </tr>
  
            <tr  class="table-success">
                <th scope="row" style="color :  #00b3b3;"></th>
                <th scope="row" style="color :  #00b3b3;">
                <img src= "https://st2.depositphotos.com/3907761/9968/v/950/depositphotos_99683504-stock-illustration-thermometer-vector-icon.jpg" style="height: 40px; width: 50px; opacity: 0.3;">
                Temperatura
                </th>
                <td id= "temp" style="color :  #00b3b3;"></td>
            </tr>
            <tr  class="table-success" style="background-color: #e3f2fd;">
                <th scope="row" style="color :  #00b3b3;"></th>
                <th scope="row" style="color :  #00b3b3;">
                <img src="https://st4.depositphotos.com/16499398/21247/v/1600/depositphotos_212471044-stock-illustration-ph-meter-icon-vector-isolated.jpg" style="height: 40px; width: 40px; opacity: 0.45;">
                Ph
                </th>
                <td id = "ph" style="color :  #00b3b3;"></td>
            </tr>
            <tr  class="table-success">
                <th scope="row" style="color :  #00b3b3;"></th>
                <th scope="row" style="color :  #00b3b3;">
                <img src="erlenmeyer-flask.png" style="height: 30px; width: 30px; opacity: 0.3;">
                Turbidez
                </th>
                <td id = "tb" style="color :  #00b3b3;"></td>
            </tr>
            <tr class="table-success" style="background-color: #e3f2fd;">
                <th scope="row" style="color :  #00b3b3;"></th>
                <th scope="row" style="color :  #00b3b3;">
                <img src="chemical-formula.png" style="height: 30px; width: 30px; opacity: 0.3;">
                O2 dissolvido
                </th>
                <td id = "o2" style="color :  #00b3b3;"></td>
            </tr>
            <tr  class="table-success">
                <th scope="row" style="color :  #00b3b3;"></th>
                <th scope="row" style="color :  #00b3b3;">
                <img src="hourglass.png" style="height: 30px; width: 30px; opacity: 0.3;">
                Time
                </th>
                <td id = "time" style="color :  #00b3b3;"></td>
            </tr>
           
            
        </table>
      </div>
    </nav>

    <nav class="navbar navbar-default">
      <div class="container .container-fluid">
          <form>
            <div class="form-group row">
              <label for="inputPassword" class="col-sm-2 col-form-label" id= "tm">T. máximo</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="tmaximo" placeholder="tempo máximo">
              </div>
            </div>
            <div class="form-group row">
                <label for="inputPassword" class="col-sm-2 col-form-label">T. de coleta</label>
                <div class="col-sm-10">
                  <input type="text" class="form-control"  id="tcoleta" placeholder="tempo de coleta (em horas)">
                </div>
            </div>
            <div class="form-group row">
                <label for="inputPassword" class="col-sm-2 col-form-label">Variação</label>
                <div class="col-sm-10">
                  <input type="text" class="form-control" id="variacao" placeholder="tempo de coleta (em horas)">
                </div>
            </div>
            <button type="submit" class="btn btn-primary" id= "btenviar"> Enviar </button>
            
          </form>
      </div>
    </nav>
    

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-database.js"></script>
          
    <script>
          // TODO: Replace the following with your app's Firebase project configuration
        var firebaseConfig = {
          apiKey: "AIzaSyCyNumX4FXX6WqodPKnXys9C4kRaOY6RjQ",
          authDomain: "luana04061997.firebaseapp.com",
          databaseURL: "https://luana04061997.firebaseio.com",
          projectId: "luana04061997",
          storageBucket: "luana04061997.appspot.com",
          messagingSenderId: "200712264227"
        };
      
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>
   
    <script>
      // Get a reference to the database service
      var database = firebase.database();

      
      var btnEnviar = document.getElementById("btenviar");
      btnEnviar.addEventListener("click", enviaDados);

      function enviaDados(){
        var tempomaximo = document.getElementById("tmaximo").value;
        var tempocoleta = document.getElementById("tcoleta").value;
        var tempovariacao = document.getElementById("variacao").value;
   
        var userId = "2";
        var postsRef = firebase.database().ref('sensors/id:' + userId + '/config');

        postsRef.push({
          tempoMaximo: tempomaximo,
          tempoColeta: tempocoleta,
          tempoDeVariacao: tempovariacao
        });
      }


      var phElement = document.getElementById('ph');
      var phRef = database.ref('sensors/id:2');

      var tempElement = document.getElementById('temp');
      var tempRef = database.ref('sensors/id:2');

      var tbElement = document.getElementById('tb');
      var tbRef = database.ref('sensors/id:2');

      var o2Element = document.getElementById('o2');
      var o2Ref = database.ref('sensors/id:2');

      var timeElement = document.getElementById('time');
      var timeRef = database.ref('sensors/id:2');

      // Sync objects changes
      phRef.limitToLast(1).on('value', function(snapshot) {
        snapshot.forEach(function(childSnapshot) {
          var childData = childSnapshot.val().ph;
          console.log("ph: " + childData);
          phElement.innerText = childData;
        });
    });

      tempRef.limitToLast(1).on('value', function(snapshot) {
        snapshot.forEach(function(childSnapshot) {
          var childData = childSnapshot.val().temperatura;
          console.log("temp: " + childData);
          tempElement.innerText = childData;
        });
    });

      tbRef.limitToLast(1).on('value', function(snapshot) {
        snapshot.forEach(function(childSnapshot) {
          var childData = childSnapshot.val().turbidez;
          console.log("tb: " + childData);
          tbElement.innerText = childData;
        });
    });
      
      o2Ref.limitToLast(1).on('value', function(snapshot) {
        snapshot.forEach(function(childSnapshot) {
          var childData = childSnapshot.val().o2;
          console.log("o2: " + childData);
          o2Element.innerText = childData;
        });
    });

      timeRef.limitToLast(1).on('value', function(snapshot) {
        snapshot.forEach(function(childSnapshot) {
          var childData = childSnapshot.val().time;
          console.log("time: " + childData);
          timeElement.innerText = childData;
        });
    });

    </script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <!-- Placed at the end of the document so the pages load faster -->
    
  </body>
</html>
